(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{19:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var c=n(2),r=n.n(c),o=n(14),u=n.n(o),i=(n(19),n(3)),a=n(4),s=n.n(a),l="/api/persons",h=function(){return s.a.get(l).then((function(e){return e.data}))},d=function(e){return s.a.post(l,e).then((function(e){return e.data}))},f=function(e,t){return s.a.put("".concat(l,"/").concat(e),t).then((function(e){return e.data}))},b=function(e){return s.a.delete("".concat(l,"/").concat(e)).then((function(e){return e.data}))},j=n(0),m=function(e){var t=e.notificationObj;if(""===t.text)return null;var n="errorMessage";return"success"===t.type&&(n="successMessage"),Object(j.jsx)("div",{className:n,children:t.text})},p=function(e){return Object(j.jsxs)("div",{children:["Filter shown with ",Object(j.jsx)("input",{onChange:e.onChange,value:e.newFilter})]})},x=function(e){return Object(j.jsxs)("form",{onSubmit:e.onSubmit,children:[Object(j.jsxs)("div",{children:["name: ",Object(j.jsx)("input",{onChange:e.handleNameChange,value:e.newName})]}),Object(j.jsxs)("div",{children:["number: ",Object(j.jsx)("input",{onChange:e.handleNumberChange,value:e.newNumber})]}),Object(j.jsx)("div",{children:Object(j.jsx)("button",{type:"submit",children:"add"})})]})},O=function(e){var t=e.personsToShow,n=e.handleDelete;return Object(j.jsx)("ul",{children:t.map((function(e,t){return Object(j.jsxs)("div",{children:[e.name," ",e.number,Object(j.jsx)("button",{onClick:function(){return n(e.id)},children:"delete"})]},t)}))})},v=function(){var e=Object(c.useState)([]),t=Object(i.a)(e,2),n=t[0],r=t[1],o=Object(c.useState)(""),u=Object(i.a)(o,2),a=u[0],s=u[1],l=Object(c.useState)(""),v=Object(i.a)(l,2),g=v[0],w=v[1],y=Object(c.useState)(""),C=Object(i.a)(y,2),T=C[0],S=C[1],N=Object(c.useState)({text:"",type:null}),k=Object(i.a)(N,2),F=k[0],D=k[1];Object(c.useEffect)((function(){h().then((function(e){r(e)})).catch((function(e){console.log(e),D({text:e.response.data.error,type:"error"}),setTimeout((function(){D({text:"",type:null})}),5e3)}))}),[]);var L=n.filter((function(e){return e.name.toLowerCase().includes(T.toLowerCase())}));return Object(j.jsxs)("div",{children:[Object(j.jsx)("h2",{children:"Phonebook"}),Object(j.jsx)(m,{notificationObj:F}),Object(j.jsx)(p,{onChange:function(e){S(e.target.value)},newFilter:T}),Object(j.jsx)("h2",{children:"Add new number"}),Object(j.jsx)(x,{onSubmit:function(e){if(e.preventDefault(),n.some((function(e){return e.name===a}))){if(window.confirm("".concat(a," is already added to the phonebook. Replace the old number with this new one?"))){var t={name:a,number:g};f(n.find((function(e){return e.name===a})).id,t).then((function(e){r(n.map((function(t){return t.name!==a?t:e}))),s(""),w(""),D({text:"The number for ".concat(a," has successfully been updated"),type:"success"}),setTimeout((function(){D({text:"",type:null})}),5e3)})).catch((function(e){D({text:"The contact ".concat(a," has already been removed from the server"),type:"error"}),setTimeout((function(){D({text:"",type:null})}),5e3)}))}}else d({name:a,number:g}).then((function(e){r(n.concat(e)),s(""),w(""),D({text:"The number for ".concat(a," has successfully been added"),type:"success"}),setTimeout((function(){D({text:"",type:null})}),5e3)})).catch((function(e){D({text:e.response.data.error,type:"error"}),setTimeout((function(){D({text:"",type:null})}),5e3)}))},handleNameChange:function(e){s(e.target.value)},handleNumberChange:function(e){w(e.target.value)},newName:a,newNumber:g}),Object(j.jsx)("h2",{children:"Numbers"}),Object(j.jsx)(O,{personsToShow:L,handleDelete:function(e){window.confirm("Delete ".concat(n.find((function(t){return t.id===e})).name,"?"))&&b(e).then((function(t){r(n.filter((function(t){return t.id!==e})))})).catch((function(e){D({text:e.response.data.error,type:"error"}),setTimeout((function(){D({text:"",type:null})}),5e3)}))}})]})},g=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,40)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,o=t.getLCP,u=t.getTTFB;n(e),c(e),r(e),o(e),u(e)}))};u.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(v,{})}),document.getElementById("root")),g()}},[[39,1,2]]]);
//# sourceMappingURL=main.77cd6a01.chunk.js.map